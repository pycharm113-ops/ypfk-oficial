<div #captureRef class="bg-yape-payment min-h-screen relative">
   <div #captureRef2 class="pt-3" [ngClass]="hiddenElements ? 'bg-yape-payment pb-5' : ''">
      <div class="mx-2">
         <div class="flex justify-content-between">
            <div class="flex align-items-end">
               <img *ngIf="!showYapeAnimate" src="yape.png" alt="yape" width="75">
               <img *ngIf="showYapeAnimate" src="yape.gif" alt="yape" width="75">
            </div>
            <div class="mr-2 mb-3 pb-4" [style.opacity]="hiddenElements ? '0' : '1'">
               <div (click)="onCerrar()" class="pointer border-circle flex justify-content-center align-items-center"
                  style="width: 38px; height: 38px; background-color: #8C3D99">
                  <i class="pi pi-times text-white"></i>
               </div>
            </div>
         </div>
      </div>
      <div class="relative bg-white border-round-2xl p-3 m-3 mb-0" [ngClass]="hiddenElements ? 'mb-5' : ''">
         <div class="flex justify-content-between my-1">
            <div class="text-xl font-bold" style="color: #863C95;">
               {{ esRecarga ? '¡Recargaste!' : (autoPayment ? '¡Te Yapearon!' : '¡Yapeaste!') }}
            </div>
            <div *ngIf="!hiddenElements" (click)="onCompartir()"
               class="pointer text-primary flex align-items-center tourid-16">
               <i class="font-medium pi pi-share-alt mr-2"></i>
               <div class="font-medium text-sm" style="margin-top: 2px;">COMPARTIR</div>
            </div>
         </div>
         <div *ngIf="userfreeClient" class="watermark">
            <ng-container *ngFor="let n of [].constructor(8)">
               <div class="watermark-text">SIN VALOR</div>
            </ng-container>
         </div>
         <div style="color: #413559;" class="font-bold mb-1 flex align-items-start gap-1">
            <span class="text-4xl" style="margin-top: 0.3rem;">S/</span><span class="text-6xl ">{{ monto }}</span>
         </div>
         <div style="color: #2E224A;" class="text-xl font-semibold font-medium mb-2 pr-4">
            {{ yape.titular }}
         </div>
         <div style="color: #67617B;" class="flex align-items-center text-sm font-medium">
            <div class="flex align-items-center gap-1">
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1rem" height="1rem" fill="#67617B">
                  <path
                     d="M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3M19 19H5V11H19V19M19 9H5V5H19V9Z" />
               </svg>
               {{ yape.date.fecha }}
            </div>

            <i class="pi pi-minus text-sm mx-2 rotate-90"></i>

            <div class="flex align-items-center gap-1">
               <i class="pi pi-clock text-sm"></i>
               {{ yape.date.hora }}
            </div>
         </div>

         <div *ngIf="yape.destino == 'Yape' && yape.mensaje"
            class="bg-yape-message w-full py-2 px-1 border-round-lg mt-3 flex gap-2 align-items-center">
            <div class="mx-1 flex">
               <img src="font-icons/chat.png" alt="" width="16">
            </div>
            <div class="font-semibold text-xs" style="color: #403554;">
               {{ yape.mensaje }}
            </div>
         </div>
         <div class="border-botton mt-3"></div>
         <div *ngIf="yape.destino === 'Yape'" class="flex align-items-center justify-content-between mt-2">
            <div class="flex align-items-center gap-2" style="color: #7B7388; letter-spacing: 0.5px;">
               <span class="font-semibold text-uxs">CÓDIGO DE SEGURIDAD</span>
               <i *ngIf="!hiddenElements" class="font-medium text-primary pi pi-info-circle"></i>
            </div>
            <div class="my-1">
               <div class="flex" style="gap: 5px;">
                  <b class="box-code" *ngFor="let item of codigo">
                     {{ item }}
                  </b>
               </div>
            </div>
         </div>
         <div *ngIf="yape.destino === 'Yape'" class="border-botton mt-2"></div>
         <div class="mt-3">
            <div class="font-semibold text-uxs mb-3" style="color: #7B7388; letter-spacing: 0.5px;">
               DATOS DE LA TRANSACCIÓN
            </div>
            <div style="color: #3E364E;" class="mb-1">
               <ng-container *ngIf="celular && (esRecarga || mostrarCelular)">
                  <div class="flex justify-content-between text-sm mt-2">
                     <span>Nro. de celular</span>
                     <span class="font-bold">{{ celular }}</span>
                  </div>
               </ng-container>
               <ng-container *ngIf="yape.destino != 'Izipay'">
                  <div class="flex justify-content-between text-sm mt-2">
                     <span>{{ esRecarga ? 'Operadora' : 'Destino' }}</span>
                     <span class="font-bold">{{ yape.destino }}</span>
                  </div>
               </ng-container>
               <div class="flex justify-content-between text-sm mt-2">
                  <span>Nro. de operación</span>
                  <span class="font-bold">{{ operacion }}</span>
               </div>
            </div>
         </div>
      </div>
   </div>

   <div *ngIf="showBanner && !isMovimiento && !esRecarga" class="p-3">
      <div style="background-color: #5C1C6A; padding: 0.8rem;" class=" border-round-2xl">
         <div class="text-sm font-semibold text-white mb-2">
            <span class="mr-2">Más en Yape</span>
            <p-badge value="Nuevo" severity="warn" styleClass="py-1 px-2 p-badge-xs" />
         </div>
         <div class="flex">
            <img [src]="linkImage" [attr.draggable]="false" width="100%" class="border-round-2xl">
         </div>
      </div>
   </div>

   <div *ngIf="(isMovimiento || esRecarga) && !hiddenElements" class="px-3 mt-3">
      <ng-container *ngIf="esRecarga">
         <button pButton (click)="onYapearDenuevo()" icon="pi pi-mobile" size="small" class="w-full text-sm mb-3"
            label="NUEVA RECARGA" style="padding: 0.7rem 0;">
         </button>
      </ng-container>
      <ng-container *ngIf="!esRecarga">
         <button pButton (click)="onYapearDenuevo()" icon="pi pi-send" size="small" class="w-full text-sm mb-3"
            label="NUEVO YAPEO" style="padding: 0.7rem 0;">
         </button>
      </ng-container>
      <div class="text-sm text-white py-2">
         <div class="flex justify-content-center align-items-center gap-2">
            <img src="font-icons/headphones.svg" width="18" height="18">
            <a [href]="linkSoporte" target="_blank">NECESITO AYUDA</a>
         </div>
      </div>
   </div>
</div>

<ng-container *ngIf="!isMovimiento && showConfetti">
   <app-confetti></app-confetti>
</ng-container>
